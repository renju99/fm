<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_workorder_form" model="ir.ui.view">
        <field name="name">facilities.workorder.form</field>
        <field name="model">facilities.workorder</field>
        <field name="priority" eval="35"/>
        <field name="arch" type="xml">
            <form>
                <header>
                    <!-- Status Overview Section - Compact Layout -->
                    <div class="row mb-2">
                        <div class="col-12">
                            <h4 class="text-primary mb-2">
                                <i class="fa fa-info-circle me-2" title="Information"></i>Work Order Status Overview
                            </h4>
                        </div>
                    </div>
                    
                    <!-- Status Cards Row -->
                    <div class="row mb-3">
                        <!-- Work Order Operational Status -->
                        <div class="col-md-6 mb-2">
                            <div class="card border-primary h-100">
                                <div class="card-header bg-primary text-white py-2">
                                    <h6 class="mb-0">
                                        <i class="fa fa-cogs me-2" title="Operational Status"></i>Operational Status
                                        <small class="float-end">Work Progress</small>
                                    </h6>
                                </div>
                                <div class="card-body p-2">
                                    <field name="state" widget="statusbar"
                                        statusbar_visible="draft,assigned,in_progress,on_hold,completed,cancelled"
                                        statusbar_colors='{"draft":"gray","assigned":"blue","in_progress":"orange","on_hold":"yellow","completed":"green","cancelled":"red"}'
                                        string="Work Order Status"/>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Approval Workflow Status -->
                        <div class="col-md-6 mb-2">
                            <div class="card border-warning h-100">
                                <div class="card-header bg-warning text-dark py-2">
                                    <h6 class="mb-0">
                                        <i class="fa fa-clipboard-check me-2" title="Approval Workflow Status"></i>Approval Workflow Status
                                        <small class="float-end">Supervisor Approval</small>
                                    </h6>
                                </div>
                                <div class="card-body p-2">
                                    <field name="approval_state" widget="statusbar"
                                        statusbar_visible="draft,submitted,supervisor,approved,refused,cancelled"
                                        statusbar_colors='{"refused":"red","approved":"green","cancelled":"red"}'
                                        string="Approval Workflow Status"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <field name="all_tasks_completed"/>
                    <field name="show_standalone_tasks"/>
                    <field name="picking_count" invisible="1"/>
                    <field name="invoice_count" invisible="1"/>
                    <field name="invoice_status" invisible="1"/>
                    <field name="budget_expense_count" invisible="1"/>
                    <field name="permit_count" invisible="1"/>
                    
                    <!-- Work Order Operational Buttons -->
                    <button name="action_start_progress" type="object" string="Start Workorder" class="oe_highlight"
                        invisible="state not in ('draft', 'assigned')"
                        confirm="Are you sure you want to start this work order? This will mark it as in progress."/>
                    <button name="action_start_with_permit_wizard" type="object" string="Start with Permit Wizard" class="btn-info"
                        invisible="state not in ('draft', 'assigned')"
                        help="Force open permit wizard for testing"/>
                    <button name="action_start_direct" type="object" string="Start Direct" class="btn-warning"
                        invisible="state not in ('draft', 'assigned')"
                        help="Start work order directly without permit check"/>
                    <button name="action_resume_work" type="object" string="Resume Work" class="oe_highlight"
                        invisible="state != 'on_hold'"/>
                    <button name="action_complete" type="object" string="Mark as Completed" class="oe_highlight"
                        invisible="status != 'in_progress'"
                        confirm="Are you sure you want to mark this Work Order as completed? All tasks will be set as completed."/>
                    <button name="action_reopen_workorder" type="object" string="Reopen" class="btn-info"
                        invisible="not can_reopen_workorder"/>
                    <button name="action_cancel" type="object" string="Cancel"
                        invisible="state in ('completed', 'cancelled')"/>
                    <button name="action_reset_to_draft" type="object" string="Reset to Draft"
                        invisible="state == 'draft'"
                        confirm="Are you sure you want to reset this work order to draft state? This action cannot be undone easily."/>
                    
                    <!-- Approval Workflow Buttons -->
                    <button name="action_submit_for_approval" type="object" string="Submit for Approval" class="oe_highlight"
                        invisible="approval_state != 'draft'"/>
                    <button name="action_supervisor_approve" type="object" string="Supervisor Approve" class="oe_highlight"
                        invisible="approval_state != 'submitted'"/>
                    <button name="action_refuse" type="object" string="Refuse" class="btn-danger"
                        invisible="approval_state in ('refused', 'cancelled') or state == 'completed'"/>
                    
                    <!-- SLA Escalation Control Buttons - Only for SLA Escalation Managers -->
                    <button name="action_toggle_escalation_cron" type="object" string="Disable Auto Escalation" class="btn-warning"
                        groups="fm.group_sla_escalation_manager"
                        invisible="not sla_id"
                        help="Toggle automatic SLA escalation on/off (SLA Escalation Managers only)"/>
                    <button name="action_manual_escalation_check" type="object" string="Check SLA Escalation" class="btn-info"
                        groups="fm.group_sla_escalation_manager"
                        invisible="not sla_id"
                        help="Manually trigger SLA escalation check for this work order (SLA Escalation Managers only)"/>
                    
                    
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="action_view_picking" type="object" icon="fa-truck"
                            invisible="picking_count == 0">
                            <field name="picking_count" widget="statinfo" string="Parts Transfers"/>
                        </button>
                        <button class="oe_stat_button" name="action_view_invoices" type="object" icon="fa-file-text-o"
                            invisible="invoice_count == 0">
                            <field name="invoice_count" widget="statinfo" string="Invoices"/>
                        </button>
                        <button name="action_create_invoice" type="object" string="Create Invoice" 
                            class="oe_stat_button btn-primary" icon="fa-plus"
                            invisible="invoice_status != 'to_invoice'">
                            <div class="o_stat_info">
                                <span class="o_stat_text">Create Invoice</span>
                            </div>
                        </button>
                        <button class="oe_stat_button" name="action_view_budget_expenses" type="object" icon="fa-money"
                            invisible="budget_expense_count == 0">
                            <field name="budget_expense_count" widget="statinfo" string="Budget Expenses"/>
                        </button>
                        <button class="oe_stat_button" name="action_view_permits" type="object" icon="fa-shield"
                            invisible="permit_count == 0">
                            <field name="permit_count" widget="statinfo" string="Permits"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name" placeholder="Work Order Reference"/></h1>
                    </div>
                    <group>
                        <group string="Work Order Details" col="2">
                            <field name="asset_id" options="{'no_create': True}"/>
                            <field name="asset_tag" readonly="1" invisible="asset_id == False"/>
                            <field name="serial_number" readonly="1" invisible="asset_id == False"/>
                            <field name="facility_id" readonly="1"/>
                            <field name="room_id" readonly="1"/>
                            <field name="building_id" readonly="1"/>
                            <field name="floor_id" readonly="1"/>
                            <field name="work_order_type"/>
                            <field name="priority"/>
                        </group>
                        <group string="Personnel &amp; Scheduled Dates" col="2">
                            <field name="technician_id"/>
                            <field name="supervisor_id" readonly="1"/>
                            <field name="manager_id" readonly="1"/>
                            <field name="start_date" readonly="start_date_readonly or sla_dates_readonly"/>
                            <field name="end_date" readonly="sla_dates_readonly"/>
                        </group>
                        <group string="Financial &amp; Contract Info" col="2">
                            <field name="cost_center_id" options="{'no_create': True}"/>
                            <field name="analytic_account_id" string="Analytic Account"/>
                            <field name="vendor_partner_id" string="Vendor" domain="[('supplier_rank', '>', 0)]"/>
                            <field name="agreement_id" string="Purchase Order"/>
                            <field name="contract_id" string="Maintenance Contract" domain="[('state', '=', 'active')]"/>
                        </group>
                        <group string="Permit Information" col="2">
                            <field name="permit_required" widget="boolean_toggle"/>
                            <field name="permit_status" readonly="1" widget="badge"/>
                            <field name="permit_notes" invisible="not permit_required"/>
                        </group>
                    </group>
                    <group string="Maintenance Schedule" colspan="2" col="2" invisible="work_order_type != 'preventive'">
                        <group string="Schedule Info" col="2">
                            <field name="schedule_id"
                                domain="[('active','=',True), ('asset_id','=',asset_id)]"
                                context="{'default_asset_id': asset_id}"
                                readonly="1"
                                help="Maintenance schedule linked to this preventive work order (read-only)"/>
                            <field name="job_plan_id"
                                readonly="status != 'draft'"
                                required="work_order_type == 'preventive'"
                                help="Select a Job Plan to automatically populate tasks for this work order. Note: Job plans are only available for preventive work orders."/>
                        </group>
                        <group string="Job Plan Info" col="1" invisible="work_order_type != 'preventive'">
                            <div class="alert alert-info" role="alert">
                                <strong>Note:</strong> Job plans are only available for preventive work orders.
                            </div>
                        </group>
                        <group string="Service Details" col="2">
                            <field name="service_type"/>
                            <field name="maintenance_team_id"/>
                        </group>
                    </group>
                    <group string="Approval Details" colspan="2" col="2">
                        <group string="Submission Info" col="2">
                            <field name="submitted_by_id" readonly="1"/>
                            <field name="approval_request_date" readonly="1"/>
                        </group>
                        <group string="Approval Info" col="2">
                            <field name="approved_by_id" readonly="1"/>
                            <field name="escalation_deadline" readonly="1"/>
                        </group>
                        <group string="Escalation Info" col="2">
                            <field name="escalation_to_id" readonly="1"/>
                            <field name="escalation_count" readonly="1"/>
                        </group>
                    </group>
                    <group string="Actual Work Dates" col="2">
                        <field name="actual_start_date" readonly="sla_dates_readonly"/>
                        <field name="actual_end_date" readonly="sla_dates_readonly"/>
                    </group>
                    <group string="SLA Information" colspan="2" col="2">
                        <group string="SLA Details" col="2">
                            <field name="sla_id" readonly="1" help="SLA is automatically assigned based on priority and facility"/>
                            <field name="sla_deadline" readonly="1"/>
                        </group>
                        <group string="Response Tracking" col="2">
                            <field name="sla_response_deadline" readonly="1"/>
                            <field name="sla_response_status" widget="badge"/>
                        </group>
                        <group string="Resolution Tracking" col="2">
                            <field name="sla_resolution_deadline" readonly="1"/>
                            <field name="sla_resolution_status" widget="badge"/>
                        </group>
                        <group string="SLA Status &amp; Escalation" col="2">
                            <field name="sla_status" widget="badge"/>
                            <field name="sla_escalation_level"/>
                        </group>
                        <group string="Escalation Trigger" col="2">
                            <field name="escalation_triggered"/>
                        </group>
                        <div class="alert alert-info" role="alert">
                            <strong>Note:</strong> SLA is automatically assigned based on work order priority and facility, and cannot be manually changed.
                        </div>
                        <button name="action_recalculate_sla" type="object" string="Recalculate SLA" class="btn btn-secondary"
                                help="Recalculate SLA based on current priority and facility settings"/>
                    </group>
                    <group string="KPI Metrics" colspan="2" col="2">
                        <group string="Performance Metrics" col="2">
                            <field name="mttr"/>
                            <field name="first_time_fix"/>
                        </group>
                        <group string="Cost &amp; Time Tracking" col="2">
                            <field name="labor_cost" readonly="1"/>
                            <field name="parts_cost" readonly="1"/>
                            <field name="total_cost" readonly="1"/>
                            <field name="downtime_hours"/>
                            <field name="cost_per_workorder"/>
                        </group>
                        <group string="Assignment Metrics" col="2">
                            <field name="total_assignment_labor_cost"/>
                            <field name="total_assignment_hours"/>
                        </group>
                        <group string="Quality Metrics" col="2">
                            <!-- <field name="skill_match_score"/> Commented out - field not available -->
                        </group>
                    </group>
                    <notebook>
                        <page string="Sections &amp; Tasks">
                            <!-- Task Management Header -->
                            <div class="alert alert-info mb-3" role="alert">
                                <i class="fa fa-info-circle me-2" title="Information"></i>
                                <strong>Task Management:</strong> Tasks are organized by sections for better workflow management. 
                                Use the job plan selector above to automatically populate tasks for preventive maintenance work orders.
                            </div>
                            
                            <!-- Quick Task Actions -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <button name="action_add_task" type="object" string="Add New Task" class="btn btn-primary"
                                            invisible="status not in ('draft', 'assigned')"
                                            help="Add a new task to this work order"/>
                                    <button name="action_import_job_plan" type="object" string="Import from Job Plan" class="btn btn-secondary"
                                            invisible="work_order_type != 'preventive' or status not in ('draft', 'assigned')"
                                            help="Import tasks from the selected job plan"/>
                                </div>
                                <div class="col-md-6 text-end">
                                    <span class="badge badge-info" style="font-size:12px;">
                                        <i class="fa fa-tasks me-1"></i>
                                        Total Tasks: <field name="total_task_count" readonly="1"/>
                                    </span>
                                    <span class="badge badge-success ms-2" style="font-size:12px;">
                                        <i class="fa fa-check me-1"></i>
                                        Completed: <field name="completed_task_count" readonly="1"/>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Sections and Tasks -->
                            <field name="section_ids" create="false" delete="false">
                                <list>
                                    <field name="sequence"/>
                                    <field name="name"/>
                                    <field name="task_count" string="Tasks" readonly="1"/>
                                    <field name="completed_task_count" string="Completed" readonly="1"/>
                                    <field name="completion_percentage" string="Progress" readonly="1" widget="progressbar"/>
                                </list>
                                <form>
                                    <group>
                                        <field name="name" readonly="1"/>
                                        <field name="sequence" readonly="1"/>
                                    </group>
                                    
                                    <!-- Section Tasks -->
                                    <notebook>
                                        <page string="Tasks">
                                            <field name="task_ids">
                                                <list editable="bottom" create="true" delete="true">
                                                    <field name="sequence" readonly="1"/>
                                                    <field name="name" readonly="1"/>
                                                    <field name="description" readonly="1"/>
                                                    <field name="is_checklist_item" readonly="1"/>
                                                    <field name="is_done" widget="boolean_toggle"/>
                                                    <field name="duration"/>
                                                    <field name="responsible_id"/>
                                                    <field name="tools_materials"/>
                                                    <field name="notes"/>
                                                    <field name="before_image" widget="image"/>
                                                    <field name="after_image" widget="image"/>
                                                </list>
                                            </field>
                                        </page>
                                        <page string="Section Details">
                                            <group>
                                                <field name="name"/>
                                                <field name="sequence"/>
                                            </group>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            
                            <!-- Standalone Tasks (without sections) -->
                            <div invisible="not show_standalone_tasks" class="mt-3">
                                <h4 style="color:#6c757d; margin-bottom:15px;">
                                    <i class="fa fa-list me-2"></i>General Tasks
                                </h4>
                                <field name="workorder_task_ids" create="true" delete="true">
                                    <list editable="bottom">
                                        <field name="sequence" readonly="1"/>
                                        <field name="name" readonly="1"/>
                                        <field name="description" readonly="1"/>
                                        <field name="is_checklist_item" readonly="1"/>
                                        <field name="is_done" widget="boolean_toggle"/>
                                        <field name="duration"/>
                                        <field name="responsible_id"/>
                                        <field name="tools_materials"/>
                                        <field name="notes"/>
                                        <field name="before_image" widget="image"/>
                                        <field name="after_image" widget="image"/>
                                    </list>
                                </field>
                            </div>
                            
                            <!-- Task Summary -->
                            <div class="mt-3 p-3 bg-light rounded">
                                <div class="row">
                                    <div class="col-md-3 text-center">
                                        <div class="border-end">
                                            <h5 class="text-muted mb-1">Total Tasks</h5>
                                            <span class="h3 text-primary"><field name="total_task_count" readonly="1"/></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 text-center">
                                        <div class="border-end">
                                            <h5 class="text-muted mb-1">Completed</h5>
                                            <span class="h3 text-success"><field name="completed_task_count" readonly="1"/></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 text-center">
                                        <div class="border-end">
                                            <h5 class="text-muted mb-1">Pending</h5>
                                            <span class="h3 text-warning"><field name="pending_task_count" readonly="1"/></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3 text-center">
                                        <h5 class="text-muted mb-1">Progress</h5>
                                        <div class="progress" style="height:30px;">
                                            <div class="progress-bar" role="progressbar" 
                                                 style="width: 100%">
                                                <field name="task_completion_percentage" readonly="1"/>%
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </page>
                        <page string="Work Done">
                            <field name="work_done"/>
                        </page>
                        <page string="Technician Assignments">
                            <field name="assignment_ids">
                                <list editable="bottom" create="true" delete="true">
                                    <field name="technician_id"/>
                                    <field name="start_date"/>
                                    <field name="end_date"/>
                                    <field name="work_hours" readonly="1"/>
                                    <field name="work_minutes" readonly="1"/>
                                    <field name="status" widget="selection"/>
                                    <field name="hourly_rate" readonly="1"/>
                                    <field name="labor_cost" readonly="1"/>
                                    <field name="notes"/>
                                    <button name="action_start_work" type="object" string="Start" class="btn btn-success btn-sm"
                                            invisible="status in ('in_progress', 'completed')" icon="fa-play"/>
                                    <button name="action_pause_work" type="object" string="Pause" class="btn btn-warning btn-sm" 
                                            invisible="status != 'in_progress'" icon="fa-pause"/>
                                    <button name="action_resume_work" type="object" string="Resume" class="btn btn-info btn-sm" 
                                            invisible="status != 'paused'" icon="fa-refresh"/>
                                    <button name="action_complete_work" type="object" string="Complete" class="btn btn-primary btn-sm" 
                                            invisible="status in ('completed', 'not_started')" icon="fa-check"/>
                                </list>
                            </field>
                        </page>
                        <page string="Parts Used">
                            <field name="parts_used_ids">
                                <list editable="bottom">
                                    <field name="product_id"/>
                                    <field name="quantity"/>
                                    <field name="uom_id"/>
                                    <field name="product_qty_in_hand"/>
                                    <field name="notes"/>
                                </list>
                            </field>
                        </page>
                        <page string="Permits">
                            <field name="permit_ids">
                                <list editable="bottom">
                                    <field name="name"/>
                                    <field name="permit_type"/>
                                    <field name="status"/>
                                    <field name="issued_date"/>
                                    <field name="expiry_date"/>
                                </list>
                            </field>
                        </page>
                        <page string="Escalation History">
                            <div class="alert alert-info mb-3" role="alert">
                                <i class="fa fa-info-circle me-2" title="Information"></i>
                                <strong>Escalation History</strong> - This section shows automatic escalations triggered by SLA breaches. 
                                Escalations are automatically created when work orders exceed their SLA deadlines and cannot be manually edited.
                            </div>
                            <field name="escalation_history" create="false" delete="false" readonly="1">
                                <list  readonly="1">
                                    <field name="escalation_level" string="Level" readonly="1"/>
                                    <field name="escalation_type" string="Type" readonly="1"/>
                                    <field name="escalation_date" string="Triggered At" widget="datetime" readonly="1"/>
                                    <field name="escalation_reason" string="Reason" readonly="1"/>
                                    <field name="escalated_to_id" string="Escalated To" optional="show" readonly="1"/>
                                    <field name="resolution_date" string="Resolved At" widget="datetime" optional="show" readonly="1"/>
                                    <field name="status" string="Status" readonly="1"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="view_maintenance_workorder_tree" model="ir.ui.view">
        <field name="name">facilities.workorder.tree</field>
        <field name="model">facilities.workorder</field>
        <field name="priority" eval="25"/>
        <field name="arch" type="xml">
            <list decoration-success="status=='done'"
                  decoration-danger="status=='cancelled'"
                  decoration-info="status=='in_progress'"
                  decoration-warning="status=='on_hold'">
                <field name="name"/>
                <field name="status"/>
                <field name="asset_id"/>
                <field name="facility_id"/>
                <field name="priority"/>
                <field name="technician_id"/>
                <field name="start_date"/>
                <field name="sla_status" widget="badge"/>
                <!-- Optional fields - hidden by default but available in view options -->
                <field name="approval_state" optional="hide"/>
                <field name="room_id" optional="hide"/>
                <field name="building_id" optional="hide"/>
                <field name="floor_id" optional="hide"/>
                <field name="service_type" optional="hide"/>
                <field name="maintenance_team_id" optional="hide"/>
                <field name="supervisor_id" optional="hide"/>
                <field name="manager_id" optional="hide"/>
                <field name="sla_id" readonly="1" optional="hide"/>
                <field name="cost_center_id" optional="hide"/>
                <field name="total_cost" optional="hide" sum="Total Cost"/>
                <field name="sla_response_status" widget="badge" optional="hide"/>
                <field name="sla_resolution_status" widget="badge" optional="hide"/>
                <field name="invoice_status" widget="badge" optional="hide"/>
            </list>
        </field>
    </record>


    <!-- Enhanced Tree View for SLA and KPI Tracking -->
    <record id="view_maintenance_workorder_enhanced_tree" model="ir.ui.view">
        <field name="name">facilities.workorder.enhanced.tree</field>
        <field name="model">facilities.workorder</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <list decoration-success="status=='done'"
                  decoration-danger="status=='cancelled'"
                  decoration-info="status=='in_progress'"
                  decoration-warning="status=='on_hold' or sla_status=='at_risk'">
                <field name="name"/>
                <field name="status"/>
                <field name="asset_id"/>
                <field name="facility_id"/>
                <field name="priority"/>
                <field name="technician_id"/>
                <field name="sla_status" widget="badge"/>
                <field name="mttr"/>
                <field name="escalation_triggered"/>
                <!-- Optional fields - hidden by default but available in view options -->
                <field name="approval_state" optional="hide"/>
                <field name="room_id" optional="hide"/>
                <field name="building_id" optional="hide"/>
                <field name="floor_id" optional="hide"/>
                <field name="service_type" optional="hide"/>
                <field name="maintenance_team_id" optional="hide"/>
                <field name="supervisor_id" optional="hide"/>
                <field name="manager_id" optional="hide"/>
                <field name="sla_id" readonly="1" optional="hide"/>
                <field name="sla_response_status" widget="badge" optional="hide"/>
                <field name="sla_resolution_status" widget="badge" optional="hide"/>
                <field name="first_time_fix" optional="hide"/>
                <field name="cost_per_workorder" optional="hide"/>
            </list>
        </field>
    </record>

    <!-- Enhanced Search View for SLA and KPI Tracking -->
    <record id="view_maintenance_workorder_enhanced_search" model="ir.ui.view">
        <field name="name">facilities.workorder.enhanced.search</field>
        <field name="model">facilities.workorder</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="asset_id"/>
                <field name="facility_id"/>
                <field name="room_id"/>
                <field name="building_id"/>
                <field name="floor_id"/>
                <field name="technician_id"/>
                <field name="supervisor_id"/>
                <field name="manager_id"/>
                <field name="sla_id"/>
                <field name="work_order_type"/>
                <field name="service_type"/>
                <field name="maintenance_team_id"/>
                <field name="analytic_account_id"/>
                <field name="partner_id"/>
                <field name="contract_id"/>
                
                <separator/>
                
                <filter string="Assigned to Me" name="assigned_to_me" domain="[('technician_id','=',uid)]"/>
                
                <separator/>
                
                <filter string="Draft" name="draft" domain="[('state','=','draft')]"/>
                <filter string="In Progress" name="in_progress" domain="[('state','=','in_progress')]"/>
                <filter string="Completed" name="completed" domain="[('state','=','completed')]"/>
                <filter string="Cancelled" name="cancelled" domain="[('state','=','cancelled')]"/>
                <filter string="On Hold" name="on_hold" domain="[('state','=','on_hold')]"/>
                
                <separator/>
                
                <filter string="SLA At Risk" name="sla_at_risk" domain="[('sla_status','=','at_risk')]"/>
                <filter string="SLA Breached" name="sla_breached" domain="[('sla_status','=','breached')]"/>
                <filter string="SLA On Time" name="sla_on_time" domain="[('sla_status','=','on_time')]"/>
                
                <separator/>
                
                <filter string="High Priority" name="high_priority" domain="[('priority','in',['3','4'])]"/>
                <filter string="Critical Priority" name="critical_priority" domain="[('priority','=','4')]"/>
                
                <separator/>
                
                <filter string="Preventive Maintenance" name="preventive" domain="[('work_order_type','=','preventive')]"/>
                <filter string="Corrective Maintenance" name="corrective" domain="[('work_order_type','=','corrective')]"/>
                <filter string="Emergency Maintenance" name="emergency" domain="[('work_order_type','=','emergency')]"/>
                
                <separator/>
                
                <filter string="Escalation Triggered" name="escalation_triggered" domain="[('escalation_triggered','=',True)]"/>
                
            <filter string="Status" name="group_status" context="{'group_by': 'state'}"/>
            <filter string="Asset" name="group_asset" context="{'group_by': 'asset_id'}"/>
            <filter string="Facility" name="group_facility" context="{'group_by': 'facility_id'}"/>
            <filter string="Technician" name="group_technician" context="{'group_by': 'technician_id'}"/>
            <filter string="SLA Status" name="group_sla_status" context="{'group_by': 'sla_status'}"/>
            <filter string="Priority" name="group_priority" context="{'group_by': 'priority'}"/>
            <filter string="Work Order Type" name="group_work_order_type" context="{'group_by': 'work_order_type'}"/>
            <filter string="Maintenance Team" name="group_maintenance_team" context="{'group_by': 'maintenance_team_id'}"/>
            </search>
        </field>
    </record>
</odoo>